webpackJsonp([1],{H8Ya:function(e,t,n){e.exports=n.p+"static/img/moon.19db3a6.jpg"},KOeX:function(e,t,n){e.exports=n.p+"static/img/constellation.ab849c2.jpg"},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("i8gr"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=n("Z0/y")({name:"App"},i,!1,function(e){n("njrr")},null,null).exports,r=n("zO6J"),s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("router-link",{attrs:{to:"/entering"}},[e._v("entring animation")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/moon"}},[e._v("moon rotation")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/texture-transition"}},[e._v("texture transition")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/dome"}},[e._v("dome")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/locations"}},[e._v("locations")])],1)])},staticRenderFns:[]},c=n("Z0/y")({},s,!1,null,null,null).exports,l=n("KH7x"),u=n.n(l),h=n("IHPB"),p=n.n(h),d=n("Q3GK"),m=5,f=.6,v=20,g=[{key:"beijing",name:"Beijing",lat:40.13,lng:117.1},{key:"tokoyo",name:"Tokoyo",lat:35.65,lng:139.87},{key:"sydney",name:"Sydney",lat:-33.73,lng:151.63},{key:"paris",name:"Paris",lat:48.79,lng:2.78},{key:"newyork",name:"New York",lat:40.7,lng:-73.65}],y=n("V2Z7"),w=n.n(y),_=w.a.Tween,x=(n("kV2P"),375),k=600,b=n("VEbC"),S=n.n(b),M={wrapper:null,props:{centerType:{type:String,default:"contain"}},mounted:function(){var e=this;this.$options.wrapper=this.$refs.wrapper,window.addEventListener("resize",function(){e.resize()}),this.resize()},methods:{resize:function(){var e=this.$options.wrapper,t=new S.a({containerWidth:window.innerWidth,containerHeight:window.innerHeight,originWidth:x,originHeight:k,centerType:this.centerType}).ratio();e.style.transform="scale("+t+")"}}},$={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"c-page"},[t("div",{ref:"wrapper",staticClass:"c-page__wrapper"},[this._t("default")],2)])},staticRenderFns:[]},z=n("Z0/y")(M,$,!1,null,null,null).exports,C=n("AA3o"),E=n.n(C),P=n("xSur"),L=n.n(P),N=n("idMM"),F=n.n(N),R=n("SxXL"),T=n.n(R),G=n("XBDr"),j=n.n(G),A=n("y4S1"),B=n.n(A),H=n("jSXc"),Z=n.n(H),K=n("shqs"),I=n.n(K),X=n("KOeX"),O=n.n(X),D=n("H8Ya"),V=n.n(D),U={earth:F.a,earthNight:T.a,earthBump:j.a,earthSpec:B.a,earthCloud:Z.a,space:I.a,moon:V.a,constellation:O.a},q=function(e){return(new d.TextureLoader).load(e)};function W(){var e=new d.SpotLight(16777215,1.2);return e.position.set(-12,12,6),e.angle=.2,e.castShadow=!1,e.penumbra=.4,e.distance=124,e.decay=1,e.shadow.camera.near=50,e.shadow.camera.far=200,e.shadow.camera.fov=35,e.shadow.mapSize.height=1024,e.shadow.mapSize.width=1024,e}var Y=null,J=function(){return Y||(Y=new function e(){var t=this;E()(this,e),this.loop=function(){requestAnimationFrame(t.loop),w.a.update()},this.loop()})},Q=n("vi/1")(d),ee=function(){function e(t){var n=this;E()(this,e),this.loop=function(){requestAnimationFrame(n.loop),n.animate(),n.render()},this.container="string"==typeof t?document.getElementById(t):t,this.width=2*x,this.height=2*k,this.camera=null,this.renderer=null,this.orbitController=null,this.scene=null,this.earthGroup=null,this.earth=null,this.updateFunc=null,this.init()}return L()(e,[{key:"init",value:function(){this.createRenderer(),this.createScene(),this.createCamera(),this.createLight(),this.createEarth(),this.createController(),this.loop(),J()}},{key:"createRenderer",value:function(){var e=new d.WebGLRenderer({alpha:!0,antialias:!0,preserveDrawingBuffer:!0}),t=this.container;e.setClearColor(0,0),e.setSize(this.width,this.height),e.domElement.style.position="relative",e.domElement.style.width=this.width/2+"px",e.domElement.style.height=this.height/2+"px",t.appendChild(e.domElement),this.renderer=e}},{key:"createScene",value:function(){this.scene=new d.Scene,this.earthGroup=new d.Group,this.scene.add(this.earthGroup)}},{key:"createCamera",value:function(){var e=new d.PerspectiveCamera(40,this.width/this.height,.1,1e3);e.position.set(0,0,28),this.scene.add(e),this.camera=e}},{key:"createLight",value:function(){this.scene.add(new d.AmbientLight(3750201,.5)),this.camera.add(W()),W()}},{key:"createEarth",value:function(){var e=new d.Mesh(new d.SphereGeometry(m,32,32),new d.MeshPhongMaterial({map:q(U.earth),bumpMap:q(U.earthBump),bumpScale:.15,specularMap:q(U.earthSpec),specular:9474192,shininess:4,transparent:!0}));e.name="earth",this.earth=e,this.earthGroup.add(e)}},{key:"createController",value:function(){var e=new Q(this.camera,this.renderer.domElement);e.rotateSpeed=.2,e.autoRotateSpeed=.1,e.autoRotate=!0,e.enableZoom=!1,e.enablePan=!0,e.enableDamping=!0,e.dampingFactor=.21,e.enabled=!0,this.orbitController=e}},{key:"animate",value:function(){this.orbitController.update(),this.updateFunc&&this.updateFunc()}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"onUpdate",value:function(e){this.updateFunc=e}}]),e}(),te={container3d:null,animate:null,components:{Page:z},data:function(){return{locations:[].concat(p()(g)),selectedLocationKey:null,latlng:""}},watch:{selectedLocationKey:function(e){var t=this.locations.filter(function(t){return t.key===e})[0];this.removeArrow(),t&&this.markLocation(t.lat,t.lng)}},computed:{selectedLocation:function(){var e=this;return this.locations.filter(function(t){return t.key===e.selectedLocationKey})[0]}},mounted:function(){this.$options.container3d=new ee(this.$refs.mountNode)},methods:{handleSelectChange:function(e){this.selectedLocationKey=e.target.value},handleInputChange:function(e){this.latlng=e.target.value;var t=e.target.value.split(","),n=u()(t,2),a=n[0],i=n[1];this.removeArrow(),this.markLocation(new Number(a),new Number(i))},markLocation:function(e,t){var n=function(e,t,n){var a=(90-e)*(Math.PI/180),i=(t+180)*(Math.PI/180),o=-n*Math.sin(a)*Math.cos(i),r=n*Math.sin(a)*Math.sin(i),s=n*Math.cos(a);return{x:1*o.toFixed(6),y:1*s.toFixed(6),z:1*r.toFixed(6)}}(e,t,m),a=n.x,i=n.y,o=n.z;this.createArrow(new d.Vector3(a,i,o)),this.moveCamera({x:a,y:i,z:o})},moveCamera:function(e){var t=e.x,n=e.y,a=e.z,i=this.$options.container3d.camera,o=i.position.length(),r=new d.Vector3(t,n,a).multiplyScalar(o/m);(function(e,t,n){return new _({x:t.x,y:t.y,z:t.z}).to({x:n.x,y:n.y,z:n.z}).onUpdate(function(t){var n=t.x,a=t.y,i=t.z;e.position.set(n,a,i)})})(i,i.position,r).start()},removeArrow:function(){var e=this.$options.container3d.scene,t=e.getObjectByName("arrow");t&&e.remove(t)},createArrow:function(e){var t=this.$options.container3d,n=t.scene,a=t.earthGroup,i=e.clone().sub(a.position),o=i.clone().negate().normalize(),r=i.clone().multiplyScalar((m+1)/m),s=new d.ArrowHelper(o,r);s.name="arrow",n.add(s)}}},ne={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page",[n("div",{ref:"mountNode"}),e._v(" "),n("div",{staticClass:"c-pageTools"},[n("select",{on:{change:e.handleSelectChange}},[n("option",{attrs:{value:""}},[e._v("Select a city")]),e._v(" "),e._l(e.locations,function(t){return n("option",{key:t.key,domProps:{value:t.key}},[e._v(e._s(t.name))])}),e._v(" "),n("option",{attrs:{value:"any"}},[e._v("- your place -")])],2),e._v(" "),e.selectedLocation?n("p",[e._v(e._s(e.selectedLocation.lat)+","+e._s(e.selectedLocation.lng))]):e._e(),e._v(" "),"any"===e.selectedLocationKey?n("div",[n("input",{attrs:{placeholder:"lat,lng"},domProps:{value:e.latlng},on:{change:e.handleInputChange}})]):e._e()])])},staticRenderFns:[]},ae=n("Z0/y")(te,ne,!1,null,null,null).exports,ie={container3d:null,moon:null,moonParent:null,components:{Page:z},mounted:function(){var e=this,t=new ee(this.$refs.mountNode),n=new d.Mesh(new d.SphereGeometry(f,32,32),new d.MeshPhongMaterial({map:q(U.moon)})),a=new d.Object3D;this.$options.container3d=t,this.$options.moon=n,this.$options.moonParent=a,t.camera.position.z=40,n.position.z=10,a.add(n),t.earthGroup.add(a),t.onUpdate(function(){e.updateRotation(),e.updateRevolution()})},methods:{updateRotation:function(){this.$options.moon.rotation.y+=.01},updateRevolution:function(){this.$options.moonParent.rotation.y+=.01}}},oe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("page",[t("div",{ref:"mountNode"})])},staticRenderFns:[]},re=n("Z0/y")(ie,oe,!1,null,null,null).exports,se={container3d:null,components:{Page:z},mounted:function(){var e,t=new ee(this.$refs.mountNode),n=((e=new d.MeshBasicMaterial({map:q(U.space)})).side=d.BackSide,new d.Mesh(new d.SphereGeometry(v,32,32),e));t.earthGroup.add(n)}},ce={render:function(){var e=this.$createElement,t=this._self._c||e;return t("page",[t("div",{ref:"mountNode"})])},staticRenderFns:[]},le=n("Z0/y")(se,ce,!1,null,null,null).exports,ue={container3d:null,nightEarth:null,components:{Page:z},data:function(){return{transitioning:!1,isNight:!1}},mounted:function(){var e=new ee(this.$refs.mountNode),t=new d.Mesh(new d.SphereGeometry(m,32,32),new d.MeshPhongMaterial({map:q(U.earthNight),bumpMap:q(U.earthBump),bumpScale:.15,specularMap:q(U.earthSpec),specular:9474192,shininess:4,transparent:!0}));t.material.opacity=0,e.earthGroup.add(t),this.$options.container3d=e,this.$options.nightEarth=t},methods:{tweenTexture:function(){var e,t,n=this,a=this.$options,i=a.container3d,o=a.nightEarth,r=void 0,s=void 0;this.isNight?(r=o.material,s=i.earth.material):(r=i.earth.material,s=o.material),(e=r,t=s,new _({opacity:0}).to({opacity:1}).onUpdate(function(n){var a=n.opacity;e.opacity=1-a,t.opacity=a})).onComplete(function(){n.isNight=!n.isNight,n.transitioning=!1}).start(),this.transitioning=!0},handleClickTransite:function(){this.tweenTexture()}}},he={render:function(){var e=this.$createElement,t=this._self._c||e;return t("page",[t("div",{ref:"mountNode"}),this._v(" "),t("div",{staticClass:"c-pageTools"},[t("button",{attrs:{disabled:this.transitioning},on:{click:this.handleClickTransite}},[this._v("Transite")])])])},staticRenderFns:[]},pe=n("Z0/y")(ue,he,!1,null,null,null).exports,de={components:{Page:z},mounted:function(){var e=new ee(this.$refs.mountNode),t=e.camera,n=e.earth,a=e.earthGroup,i=t.position.z;t.position.z=200,n.material.opacity=0,new y.Tween({z:t.position.z,opacity:0,r:4*Math.PI}).to({z:i,opacity:1,r:0}).easing(y.Easing.Cubic.Out).onUpdate(function(e){var i=e.z,o=e.opacity,r=e.r;t.position.z=i,n.material.opacity=o,a.rotation.y=r}).start()}},me={render:function(){var e=this.$createElement,t=this._self._c||e;return t("page",[t("div",{ref:"mountNode"})])},staticRenderFns:[]},fe=n("Z0/y")(de,me,!1,null,null,null).exports;a.a.use(r.a);var ve=new r.a({routes:[{path:"/",name:"Index",component:c},{path:"/locations",name:"Locations",component:ae},{path:"/texture-transition",name:"TextureTransition",component:pe},{path:"/moon",name:"Moon",component:re},{path:"/dome",name:"Dome",component:le},{path:"/entering",name:"Entering",component:fe}]});window.THREE=d,a.a.config.productionTip=!1,new a.a({el:"#app",router:ve,render:function(e){return e(o)}})},SxXL:function(e,t,n){e.exports=n.p+"static/img/earth_night.ec3368a.jpg"},XBDr:function(e,t,n){e.exports=n.p+"static/img/earth_bump.55b3930.jpg"},idMM:function(e,t,n){e.exports=n.p+"static/img/earth.4dbbbc3.jpg"},jSXc:function(e,t,n){e.exports=n.p+"static/img/earth_cloud.6360bf6.png"},kV2P:function(e,t){},njrr:function(e,t){},shqs:function(e,t,n){e.exports=n.p+"static/img/earth_space.06b498d.png"},y4S1:function(e,t,n){e.exports=n.p+"static/img/earth_spec.2a55b29.jpg"}},["NHnr"]);
//# sourceMappingURL=app.9d16be6a009f90fe5908.js.map