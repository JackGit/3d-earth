webpackJsonp([1],{H8Ya:function(e,t,n){e.exports=n.p+"static/img/moon.19db3a6.jpg"},HewL:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("/5sW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App"},i,!1,function(e){n("uNBK")},null,null).exports,o=n("/ocq"),s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("router-link",{attrs:{to:"/entering"}},[e._v("entring animation")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/moon"}},[e._v("moon rotation")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/texture-transition"}},[e._v("texture transition")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/dome"}},[e._v("dome")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/locations"}},[e._v("locations")])],1)])},staticRenderFns:[]},c=n("VU/8")({},s,!1,null,null,null).exports,l=n("d7EF"),u=n.n(l),h=n("Gu7T"),p=n.n(h),d=n("hYfd"),m=n.n(d),f=n("idMM"),v=n.n(f),g=n("SxXL"),w=n.n(g),y=n("XBDr"),x=n.n(y),_=n("y4S1"),k=n.n(_),b=n("jSXc"),S=n.n(b),M=n("shqs"),$=n.n(M),C=n("H8Ya"),L=n.n(C),E={earth:v.a,earthNight:w.a,earthBump:x.a,earthSpec:k.a,earthCloud:S.a,space:$.a,moon:L.a},P={props:{textures:{type:Array,default:function(){return[]}}},data:function(){return{progress:0,completed:!1}},created:function(){var e=this,t=new m.a;[].concat(p()(this.textures),["earth","earthBump","earthSpec"]).map(function(e){return E[e]}).forEach(function(e){return t.add(e,e)}),t.onProgress.add(function(){e.progress=Math.round(t.progress)}),t.onComplete.add(function(){e.completed=!0,e.$nextTick(function(){return e.$emit("complete")})}),t.load()}},z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.completed?t("div",[this._t("default")],2):t("div",{staticClass:"c-progress"},[this._v("\n    loading "+this._s(this.progress)+"%\n  ")])])},staticRenderFns:[]};var T=n("VU/8")(P,z,!1,function(e){n("HewL")},"data-v-42c5b1dc",null).exports,N=n("Q3GK"),F=5,R=.6,G=20,V=[{key:"beijing",name:"Beijing",lat:40.13,lng:117.1},{key:"tokoyo",name:"Tokoyo",lat:35.65,lng:139.87},{key:"sydney",name:"Sydney",lat:-33.73,lng:151.63},{key:"paris",name:"Paris",lat:48.79,lng:2.78},{key:"newyork",name:"New York",lat:40.7,lng:-73.65}],B=n("V2Z7"),U=n.n(B),j=U.a.Tween,A=(n("kV2P"),375),H=600,K=n("VEbC"),I=n.n(K),D={wrapper:null,props:{centerType:{type:String,default:"contain"}},mounted:function(){var e=this;this.$options.wrapper=this.$refs.wrapper,window.addEventListener("resize",function(){e.resize()}),this.resize()},methods:{resize:function(){var e=this.$options.wrapper,t=new I.a({containerWidth:window.innerWidth,containerHeight:window.innerHeight,originWidth:A,originHeight:H,centerType:this.centerType}).ratio();e.style.transform="scale("+t+")"}}},W={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"c-page"},[t("div",{ref:"wrapper",staticClass:"c-page__wrapper"},[this._t("default")],2)])},staticRenderFns:[]},X=n("VU/8")(D,W,!1,null,null,null).exports,q=n("Zrlr"),O=n.n(q),Y=n("wxAW"),Z=n.n(Y),J=function(e){return(new N.TextureLoader).load(e)};function Q(){var e=new N.SpotLight(16777215,1.2);return e.position.set(-12,12,6),e.angle=.2,e.castShadow=!1,e.penumbra=.4,e.distance=124,e.decay=1,e.shadow.camera.near=50,e.shadow.camera.far=200,e.shadow.camera.fov=35,e.shadow.mapSize.height=1024,e.shadow.mapSize.width=1024,e}var ee=null,te=function(){return ee||(ee=new function e(){var t=this;O()(this,e),this.loop=function(){requestAnimationFrame(t.loop),U.a.update()},this.loop()})},ne=n("vi/1")(N),ae=function(){function e(t){var n=this;O()(this,e),this.loop=function(){requestAnimationFrame(n.loop),n.animate(),n.render()},this.container="string"==typeof t?document.getElementById(t):t,this.width=2*A,this.height=2*H,this.camera=null,this.renderer=null,this.orbitController=null,this.scene=null,this.earthGroup=null,this.earth=null,this.updateFunc=null,this.init()}return Z()(e,[{key:"init",value:function(){this.createRenderer(),this.createScene(),this.createCamera(),this.createLight(),this.createEarth(),this.createController(),this.loop(),te()}},{key:"createRenderer",value:function(){var e=new N.WebGLRenderer({alpha:!0,antialias:!0,preserveDrawingBuffer:!0}),t=this.container;e.setClearColor(0,0),e.setSize(this.width,this.height),e.domElement.style.position="relative",e.domElement.style.width=this.width/2+"px",e.domElement.style.height=this.height/2+"px",t.appendChild(e.domElement),this.renderer=e}},{key:"createScene",value:function(){this.scene=new N.Scene,this.earthGroup=new N.Group,this.scene.add(this.earthGroup)}},{key:"createCamera",value:function(){var e=new N.PerspectiveCamera(40,this.width/this.height,.1,1e3);e.position.set(0,0,28),this.scene.add(e),this.camera=e}},{key:"createLight",value:function(){this.scene.add(new N.AmbientLight(3750201,.5)),this.camera.add(Q()),Q()}},{key:"createEarth",value:function(){var e=new N.Mesh(new N.SphereGeometry(F,32,32),new N.MeshPhongMaterial({map:J(E.earth),bumpMap:J(E.earthBump),bumpScale:.15,specularMap:J(E.earthSpec),specular:9474192,shininess:4,transparent:!0}));e.name="earth",this.earth=e,this.earthGroup.add(e)}},{key:"createController",value:function(){var e=new ne(this.camera,this.renderer.domElement);e.rotateSpeed=.2,e.autoRotateSpeed=.1,e.autoRotate=!0,e.enableZoom=!1,e.enablePan=!0,e.enableDamping=!0,e.dampingFactor=.21,e.enabled=!0,this.orbitController=e}},{key:"animate",value:function(){this.orbitController.update(),this.updateFunc&&this.updateFunc()}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"onUpdate",value:function(e){this.updateFunc=e}}]),e}(),ie={container3d:null,animate:null,components:{Page:X,TexturePreLoader:T},data:function(){return{locations:[].concat(p()(V)),selectedLocationKey:null,latlng:""}},watch:{selectedLocationKey:function(e){var t=this.locations.filter(function(t){return t.key===e})[0];this.removeArrow(),t&&this.markLocation(t.lat,t.lng)}},computed:{selectedLocation:function(){var e=this;return this.locations.filter(function(t){return t.key===e.selectedLocationKey})[0]}},methods:{init:function(){this.$options.container3d=new ae(this.$refs.mountNode)},handleSelectChange:function(e){this.selectedLocationKey=e.target.value},handleInputChange:function(e){this.latlng=e.target.value;var t=e.target.value.split(","),n=u()(t,2),a=n[0],i=n[1];this.removeArrow(),this.markLocation(new Number(a),new Number(i))},markLocation:function(e,t){var n=function(e,t,n){var a=(90-e)*(Math.PI/180),i=(t+180)*(Math.PI/180),r=-n*Math.sin(a)*Math.cos(i),o=n*Math.sin(a)*Math.sin(i),s=n*Math.cos(a);return{x:1*r.toFixed(6),y:1*s.toFixed(6),z:1*o.toFixed(6)}}(e,t,F),a=n.x,i=n.y,r=n.z;this.createArrow(new N.Vector3(a,i,r)),this.moveCamera({x:a,y:i,z:r})},moveCamera:function(e){var t=e.x,n=e.y,a=e.z,i=this.$options.container3d.camera,r=i.position.length(),o=new N.Vector3(t,n,a).multiplyScalar(r/F);(function(e,t,n){return new j({x:t.x,y:t.y,z:t.z}).to({x:n.x,y:n.y,z:n.z}).onUpdate(function(t){var n=t.x,a=t.y,i=t.z;e.position.set(n,a,i)})})(i,i.position,o).start()},removeArrow:function(){var e=this.$options.container3d.scene,t=e.getObjectByName("arrow");t&&e.remove(t)},createArrow:function(e){var t=this.$options.container3d,n=t.scene,a=t.earthGroup,i=e.clone().sub(a.position),r=i.clone().negate().normalize(),o=i.clone().multiplyScalar((F+1)/F),s=new N.ArrowHelper(r,o);s.name="arrow",n.add(s)}}},re={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page",[n("texture-pre-loader",{on:{complete:function(t){e.init()}}},[n("div",{ref:"mountNode"}),e._v(" "),n("div",{staticClass:"c-pageTools"},[n("select",{on:{change:e.handleSelectChange}},[n("option",{attrs:{value:""}},[e._v("Select a city")]),e._v(" "),e._l(e.locations,function(t){return n("option",{key:t.key,domProps:{value:t.key}},[e._v(e._s(t.name))])}),e._v(" "),n("option",{attrs:{value:"any"}},[e._v("- your place -")])],2),e._v(" "),e.selectedLocation?n("p",[e._v(e._s(e.selectedLocation.lat)+","+e._s(e.selectedLocation.lng))]):e._e(),e._v(" "),"any"===e.selectedLocationKey?n("div",[n("input",{attrs:{placeholder:"lat,lng"},domProps:{value:e.latlng},on:{change:e.handleInputChange}})]):e._e()])])],1)},staticRenderFns:[]},oe=n("VU/8")(ie,re,!1,null,null,null).exports,se={container3d:null,moon:null,moonParent:null,components:{Page:X,TexturePreLoader:T},methods:{init:function(){var e=this,t=new ae(this.$refs.mountNode),n=new N.Mesh(new N.SphereGeometry(R,32,32),new N.MeshPhongMaterial({map:J(E.moon)})),a=new N.Object3D;this.$options.container3d=t,this.$options.moon=n,this.$options.moonParent=a,t.camera.position.z=40,n.position.z=10,a.add(n),t.earthGroup.add(a),t.onUpdate(function(){e.updateRotation(),e.updateRevolution()})},updateRotation:function(){this.$options.moon.rotation.y+=.01},updateRevolution:function(){this.$options.moonParent.rotation.y+=.01}}},ce={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page",[n("texture-pre-loader",{attrs:{textures:["moon"]},on:{complete:function(t){e.init()}}},[n("div",{ref:"mountNode"})])],1)},staticRenderFns:[]},le=n("VU/8")(se,ce,!1,null,null,null).exports,ue={container3d:null,components:{Page:X,TexturePreLoader:T},methods:{init:function(){var e,t=new ae(this.$refs.mountNode),n=((e=new N.MeshBasicMaterial({map:J(E.space)})).side=N.BackSide,new N.Mesh(new N.SphereGeometry(G,32,32),e));t.earthGroup.add(n)}}},he={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page",[n("texture-pre-loader",{attrs:{textures:["space"]},on:{complete:function(t){e.init()}}},[n("div",{ref:"mountNode"})])],1)},staticRenderFns:[]},pe=n("VU/8")(ue,he,!1,null,null,null).exports,de={container3d:null,nightEarth:null,components:{Page:X,TexturePreLoader:T},data:function(){return{transitioning:!1,isNight:!1}},methods:{init:function(){var e=new ae(this.$refs.mountNode),t=new N.Mesh(new N.SphereGeometry(F,32,32),new N.MeshPhongMaterial({map:J(E.earthNight),bumpMap:J(E.earthBump),bumpScale:.15,specularMap:J(E.earthSpec),specular:9474192,shininess:4,transparent:!0}));t.material.opacity=0,e.earthGroup.add(t),this.$options.container3d=e,this.$options.nightEarth=t},tweenTexture:function(){var e,t,n=this,a=this.$options,i=a.container3d,r=a.nightEarth,o=void 0,s=void 0;this.isNight?(o=r.material,s=i.earth.material):(o=i.earth.material,s=r.material),(e=o,t=s,new j({opacity:0}).to({opacity:1}).onUpdate(function(n){var a=n.opacity;e.opacity=1-a,t.opacity=a})).onComplete(function(){n.isNight=!n.isNight,n.transitioning=!1}).start(),this.transitioning=!0},handleClickTransite:function(){this.tweenTexture()}}},me={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page",[n("texture-pre-loader",{attrs:{textures:["earthNight"]},on:{complete:function(t){e.init()}}},[n("div",{ref:"mountNode"}),e._v(" "),n("div",{staticClass:"c-pageTools"},[n("button",{attrs:{disabled:e.transitioning},on:{click:e.handleClickTransite}},[e._v("Transite")])])])],1)},staticRenderFns:[]},fe=n("VU/8")(de,me,!1,null,null,null).exports,ve={components:{Page:X,TexturePreLoader:T},methods:{init:function(){var e=new ae(this.$refs.mountNode),t=e.camera,n=e.earth,a=e.earthGroup,i=t.position.z;t.position.z=200,n.material.opacity=0;var r=new B.Tween({z:t.position.z,opacity:0,r:4*Math.PI}).to({z:i,opacity:1,r:0}).easing(B.Easing.Cubic.Out).onUpdate(function(e){var i=e.z,r=e.opacity,o=e.r;t.position.z=i,n.material.opacity=r,a.rotation.y=o});setTimeout(function(){return r.start()},500)}}},ge={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page",[n("texture-pre-loader",{on:{complete:function(t){e.init()}}},[n("div",{ref:"mountNode"})])],1)},staticRenderFns:[]},we=n("VU/8")(ve,ge,!1,null,null,null).exports;a.a.use(o.a);var ye=new o.a({routes:[{path:"/",name:"Index",component:c},{path:"/locations",name:"Locations",component:oe},{path:"/texture-transition",name:"TextureTransition",component:fe},{path:"/moon",name:"Moon",component:le},{path:"/dome",name:"Dome",component:pe},{path:"/entering",name:"Entering",component:we}]});window.THREE=N,a.a.config.productionTip=!1,new a.a({el:"#app",router:ye,render:function(e){return e(r)}})},SxXL:function(e,t,n){e.exports=n.p+"static/img/earth_night.ec3368a.jpg"},XBDr:function(e,t,n){e.exports=n.p+"static/img/earth_bump.55b3930.jpg"},idMM:function(e,t,n){e.exports=n.p+"static/img/earth.4dbbbc3.jpg"},jSXc:function(e,t,n){e.exports=n.p+"static/img/earth_cloud.6360bf6.png"},kV2P:function(e,t){},shqs:function(e,t,n){e.exports=n.p+"static/img/earth_space.06b498d.png"},uNBK:function(e,t){},y4S1:function(e,t,n){e.exports=n.p+"static/img/earth_spec.2a55b29.jpg"}},["NHnr"]);
//# sourceMappingURL=app.21a587fb3041881dc835.js.map